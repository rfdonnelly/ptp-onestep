= One-step Timestamping with Linux C APIs

== Invocation

[source,sh]
----
make CROSS_COMPILE=aarch64-linux-gnu- EXTRA_CFLAGS=-static
./run <transmitter> <receiver>
----

== Example

[source,console]
----
$ make CROSS_COMPILE=aarch64-linux-gnu- EXTRA_CFLAGS=-static
aarch64-linux-gnu-gcc -MMD -Wall -Wextra -static -g -c -o onestep.o onestep.c
aarch64-linux-gnu-gcc -MMD -Wall -Wextra -static -g -c -o socket.o socket.c
aarch64-linux-gnu-gcc -o onestep onestep.o socket.o
$ ./run tx rx
Transmitted
ptp_msg: { header: { messageType: 0x0 majorSdoId: 0x1 versionPtp: 0x2 minorVersionPtp: 0x1 messageLength: 0x2c domainNumber: 0x0 minorSdoId: 0x0 flags: 0x00 correctionField: 0 messageTypeSpecific: 0x0 clockIdentity: 0xcacd33fffee47891 portNumber: 0x1 sequenceId: 23 controlField: 0x0 logMessagePeriod: -3 } originTimeStamp: { secs: 0 nsecs: 0 } }

Received
ptp_msg: { header: { messageType: 0x0 majorSdoId: 0x1 versionPtp: 0x2 minorVersionPtp: 0x1 messageLength: 0x2c domainNumber: 0x0 minorSdoId: 0x0 flags: 0x00 correctionField: 44563968 messageTypeSpecific: 0x0 clockIdentity: 0xcacd33fffee47891 portNumber: 0x1 sequenceId: 23 controlField: 0x0 logMessagePeriod: -3 } originTimeStamp: { secs: 606649 nsecs: 331457658 } }
rx_timestamp: {sec:606649 nsec:862675568}

Diff
ptp_msg: { header: { messageType: 0x0 majorSdoId: 0x1 versionPtp: 0x2 minorVersionPtp: 0x1 messageLength: 0x2c domainNumber: 0x0 minorSdoId: 0x0 flags: 0x00 correctionField: -0- +44563968+ messageTypeSpecific: 0x0 clockIdentity: 0xcacd33fffee47891 portNumber: 0x1 sequenceId: 23 controlField: 0x0 logMessagePeriod: -3 } originTimeStamp: { secs: -0- +606649+ nsecs: -0- +331457658+ } }

PASSED: Packets differ => packet was timestamped
----
